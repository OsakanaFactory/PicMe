# PicMe - 進捗管理（タスク）

**プロジェクト名**: PicMe（ぴくみー）
**現在のバージョン**: v4.2
**作成日**: 2026-01-20
**最終更新**: 2026-02-07

> **バージョン表記について**: 本プロジェクトはセマンティックバージョニングに従います。
> - v0.x: 環境構築フェーズ
> - v1.x: MVP機能フェーズ（基本機能完成）
> - v2.x: 追加機能フェーズ（カスタマイズ機能）
> - v3.x: 有料機能フェーズ（サブスクリプション）
> - v4.x: 管理者機能・追加実装フェーズ
> - v5.x: テスト・デプロイフェーズ

---

## 📊 全体進捗

| リリース版 | フェーズ | ステータス | 進捗率 | 開始日 | 完了日 |
|---------|---------|----------|-------|--------|--------|
| v0.1 | 環境構築 | ✅ 完了 | 100% | 2026-01-20 | 2026-01-20 |
| v1.0 | MVP機能 | ✅ 完了 | 100% | 2026-01-21 | 2026-01-22 |
| v2.0 | 追加機能 | ✅ 完了 | 100% | 2026-01-22 | 2026-01-28 |
| v3.0 | 有料機能（バックエンド） | ✅ 完了 | 100% | 2026-02-02 | 2026-02-02 |
| v3.1 | 有料機能（フロントエンド） | ✅ 完了 | 100% | 2026-02-02 | 2026-02-02 |
| v4.0 | 管理者機能（計画） | ✅ 完了 | 100% | 2026-02-03 | 2026-02-03 |
| v4.0.1 | 管理者機能（バグ修正） | ✅ 完了 | 100% | 2026-02-03 | 2026-02-03 |
| v4.1 | 管理者機能（実装） | ✅ 完了 | 100% | 2026-02-03 | 2026-02-03 |
| v4.2 | Cloudinary画像UP + 管理者作成 | ✅ 完了 | 100% | 2026-02-07 | 2026-02-07 |
| v4.3 | SendGridメール + メール認証 + パスワードリセット | 未着手 | 0% | - | - |
| v4.4 | Pro機能（問い合わせ・解析・カスタムCSS） | 未着手 | 0% | - | - |
| v4.5 | UX改善（D&D並び替え + Markdownエディタ） | 未着手 | 0% | - | - |
| v5.0 | テスト実装 | 未着手 | 0% | - | - |
| v5.1 | セキュリティ対策 | 未着手 | 0% | - | - |
| v5.2 | 本番デプロイ | 未着手 | 0% | - | - |

**全体進捗**: 完了フェーズ 9/15（60%）

---

## ✅ 完了済みバージョン

### v0.1〜v4.1: 完了済み

詳細は [変更履歴.md](./変更履歴.md) を参照。

---

## ✅ v4.2: Cloudinary画像アップロード + 管理者作成（完了）

**目標**: Cloudinary画像アップロードと管理者アカウント作成機能
**完了日**: 2026-02-07

**進捗**: 8/8タスク（100%）

### 4.2.1 Cloudinary連携
- [x] CloudinaryConfig（@Value設定 + Bean定義）
- [x] CloudinaryService（interface + impl、アップロード/削除/最適化/サムネイル）
- [x] POST /api/artworks/upload（作品画像アップロード + ストレージ制限チェック）
- [x] POST /api/profile/avatar, POST /api/profile/header（プロフィール画像）
- [x] FileUploadコンポーネント（D&D + プレビュー + プログレスバー）
- [x] artworksページ・profileページをFileUpload対応に改修

### 4.2.2 管理者アカウント作成API
- [x] POST /api/admin/users/create（AdminCreateUserRequest DTO）
- [x] Artwork.fileSizeフィールド追加 + sumFileSizeByUserIdクエリ

---

## 🔧 v4.3: SendGridメールインフラ + メール認証 + パスワードリセット

**目標**: メール基盤構築、メール認証、パスワードリセット機能

**進捗**: 0/14タスク（0%）

### 4.3.1 メール基盤（SendGrid）
- [ ] pom.xmlに依存関係追加（spring-boot-starter-mail, sendgrid-java）
- [ ] SendGridConfig.java（api-key, from-email, from-name）
- [ ] EmailService interface + EmailServiceImpl
- [ ] 未設定時コンソールフォールバック

### 4.3.2 メール認証
- [ ] VerificationTokenエンティティ + Repository
- [ ] AuthServiceImpl.signup()にメール送信追加
- [ ] GET /api/auth/verify?token=xxx
- [ ] POST /api/auth/resend-verification
- [ ] フロントエンド: verify-emailページ
- [ ] フロントエンド: メール認証バナー（ダッシュボード上部）

### 4.3.3 パスワードリセット
- [ ] PasswordResetTokenエンティティ + Repository
- [ ] POST /api/auth/forgot-password
- [ ] POST /api/auth/reset-password
- [ ] フロントエンド: forgot-password / reset-passwordページ

---

## 🎯 v4.4: Pro機能（問い合わせフォーム・アクセス解析・カスタムCSS）

**目標**: PRO/STUDIO向けの付加価値機能

**進捗**: 0/18タスク（0%）

### 4.4.1 問い合わせフォーム（PRO以上）
- [ ] POST /api/public/{username}/inquiries（問い合わせ受付）
- [ ] PublicInquiryRequest DTO
- [ ] InquiryService（保存 + メール通知）
- [ ] フロントエンド: contact-form.tsx
- [ ] 公開ページにコンタクトフォーム追加

### 4.4.2 アクセス解析（PRO以上）
- [ ] PageViewエンティティ + Repository
- [ ] AnalyticsService（記録 + 集計）
- [ ] GET /api/analytics/summary, /api/analytics/timeline
- [ ] PublicController修正（ページビュー記録@Async）
- [ ] フロントエンド: analyticsページ（recharts）
- [ ] サイドバーに「アクセス解析」リンク追加

### 4.4.3 カスタムCSS（PRO以上）
- [ ] Profile.customCssフィールド追加
- [ ] CssSanitizer（XSS防止）
- [ ] PUT /api/profile/custom-css
- [ ] フロントエンド: custom-cssページ（エディタ + ライブプレビュー）
- [ ] 公開ページにカスタムCSS適用
- [ ] 行数制限: PRO 100行, STUDIO 500行
- [ ] PublicPageResponse修正（contactFormEnabled, customCss追加）

---

## 📝 v4.5: UX改善（D&D並び替え + Markdownエディタ）

**目標**: ドラッグ&ドロップ並び替えとMarkdownエディタ

**進捗**: 0/7タスク（0%）

### 4.5.1 ドラッグ&ドロップ並び替え
- [ ] @dnd-kit/core, @dnd-kit/sortable 導入
- [ ] SortableArtworkList コンポーネント
- [ ] artworksページに並び替えモード追加
- [ ] social-linksページにもD&D追加

### 4.5.2 Markdownエディタ（PRO以上）
- [ ] @uiw/react-md-editor 導入
- [ ] Post.contentFormat追加（PLAIN/MARKDOWN）
- [ ] postsページにMarkdownエディタ実装（PRO以上で有効化）

---

## 🧪 v5.0: テスト実装

**目標**: ユニットテスト・統合テスト・E2Eテストの実装

**進捗**: 0/12タスク（0%）

### 5.0.1 バックエンドテスト（優先度: 高）

#### ユニットテスト
- [ ] AuthService テスト
- [ ] ProfileService テスト
- [ ] ArtworkService テスト
- [ ] SubscriptionService テスト
- [ ] AdminService テスト

#### 統合テスト
- [ ] AuthController テスト
- [ ] ArtworkController テスト
- [ ] SubscriptionController テスト
- [ ] AdminController テスト

### 5.0.2 フロントエンドテスト（優先度: 中）

#### E2Eテスト（Playwright）
- [ ] ユーザー登録〜ログインフロー
- [ ] 画像アップロード〜公開フロー
- [ ] プラン変更フロー

---

## 🔒 v5.1: セキュリティ対策

**目標**: セキュリティ監査と対策実装

**進捗**: 0/6タスク（0%）

### 5.1.1 セキュリティ確認・実装

- [ ] SQLインジェクション対策確認
- [ ] XSS対策確認
- [ ] CSRF対策確認
- [ ] レート制限実装（Spring Security / Redis）
- [ ] セキュリティヘッダー設定（CSP, X-Frame-Options等）
- [ ] セキュリティ監査レポート作成

---

## 🚀 v5.2: 本番デプロイ

**目標**: 本番環境へのデプロイとCI/CD構築

**進捗**: 0/10タスク（0%）

### 5.2.1 デプロイ準備

- [ ] 本番環境変数一覧作成
- [ ] シークレット管理方針決定

### 5.2.2 フロントエンドデプロイ（Vercel）

- [ ] Vercelプロジェクト作成
- [ ] 環境変数設定
- [ ] ドメイン設定

### 5.2.3 バックエンドデプロイ（Railway）

- [ ] Railwayプロジェクト作成
- [ ] PostgreSQLプロビジョニング
- [ ] 環境変数設定
- [ ] ドメイン設定

### 5.2.4 CI/CD構築

- [ ] GitHub Actions ワークフロー作成（テスト自動実行）
- [ ] 自動デプロイ設定（main ブランチマージ時）

---

## 📝 タスク管理ルール

### ステータス定義

- **未着手**: まだ開始していない
- **進行中**: 現在作業中
- **レビュー待ち**: 実装完了、レビュー待ち
- **完了**: レビュー完了、マージ済み

### 優先度定義

- **高**: MVP・コア機能、必須
- **中**: 重要だが後回し可能
- **低**: Nice to have

### 見積もり（複雑度）

- **S（Small）**: 1〜2時間
- **M（Medium）**: 半日〜1日
- **L（Large）**: 2〜3日
- **XL（Extra Large）**: 1週間以上

---

## 📊 マイルストーン

| マイルストーン | 期限目標 | 説明 |
|-------------|---------|------|
| 🏁 M1: v0.1リリース | 2026-01-20 | ✅ 環境構築完了 |
| 🏁 M2: v1.0リリース | 2026-01-22 | ✅ MVP機能完了 |
| 🏁 M3: v2.0リリース | 2026-01-28 | ✅ 追加機能完了 |
| 🏁 M4: v3.1リリース | 2026-02-02 | ✅ 有料機能完了 |
| 🏁 M5: v4.1リリース | 2026-02-03 | ✅ 管理者機能完了 |
| 🏁 M5.5: v4.2リリース | 2026-02-07 | ✅ Cloudinary + 管理者作成 |
| 🏁 M6: v4.5リリース | TBD | ⏳ 追加実装完了 |
| 🏁 M7: v5.2リリース | TBD | ⏳ 正式リリース |

---

## 🐛 バグ・課題トラッカー

### 既知の課題

| ID | 内容 | 優先度 | ステータス |
|----|------|--------|----------|
| - | なし | - | - |

### 技術的負債

| ID | 内容 | 対応予定 |
|----|------|---------|
| TD-1 | ~~画像アップロードがURL入力のみ~~ | ✅ v4.2で解消 |
| TD-2 | ~~管理者アカウントが手動作成のみ~~ | ✅ v4.2で解消 |
| TD-3 | 作品並び替えがD&D非対応 | v4.5 |
| TD-4 | お知らせ編集がプレーンテキストのみ | v4.5 |
| TD-5 | メール認証なし | v4.3 |
| TD-6 | パスワードリセット機能なし | v4.3 |

---

## 📌 メモ・備考

- v4.2〜v4.5は追加機能であり、本番リリースには必須ではない
- v5.0〜v5.2は本番リリース前に必須
- Stripe・AdSenseの本番設定はv5.2で実施
- セキュリティ監査はv5.1で実施、問題があればv5.1.xで修正

---

## 🔗 関連ドキュメント

- [要件定義書](./要件定義書.md)
- [基本設計書](./基本設計書.md)
- [詳細設計書](./詳細設計書.md)
- [変更履歴](./変更履歴.md)

---

**最終更新**: 2026-02-07
**次回更新予定**: v4.3着手時
